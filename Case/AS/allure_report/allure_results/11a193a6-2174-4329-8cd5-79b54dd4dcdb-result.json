{"name": "test_PostDocDomainParentAddTwoParallel", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <Case.AS.Http.DocDomainMgnt.test_AddDocDomain.Test_PostMgntV1Domain object at 0x053E3DD8>\n\n    @pytest.mark.high\n    def test_PostDocDomainParentAddTwoParallel(self):\n        \"\"\"\n        父域添加多个平级域\n        :return: None\n        \"\"\"\n        CommonDocDomain().clearRelationDomain(host=\"10.2.176.208\")  # 清空子域的关系域\n        CommonDocDomain().clearRelationDomain(host=\"10.2.180.162\")  # 清空平级域的关系域\n        CommonDocDomain().clearRelationDomain(host=\"10.2.176.176\")  # 清空平级域的关系域\n        CommonDocDomain().clearRelationDomain(host=\"10.2.176.245\")  # 清空父域的关系域\n>       CommonDocDomain().addRelationDomain(host=\"10.2.176.208\", domaintype=\"child\")  # 添加一个子域\n\nHttp\\DocDomainMgnt\\test_AddDocDomain.py:194: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nHttp\\DocDomainMgnt\\CommonDocDomain.py:181: in addRelationDomain\n    raise e\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Case.AS.Http.DocDomainMgnt.CommonDocDomain.CommonDocDomain object at 0x0549B388>\nhost = '10.2.176.208', port = 443, domaintype = 'child'\ncredential_id = '9d695713-28c6-48e1-bdcb-8371ac493065'\ncredential_key = 'qc3hPlySq-1H', httphost = '10.2.176.245'\nnetwork_type = 'direct'\n\n    @allure.step(\"添加关系域\")\n    def addRelationDomain(self, host, port=443, domaintype=\"child\", credential_id=None,\n                          credential_key=None, httphost=\"10.2.176.245\", network_type=\"direct\"):\n        \"\"\"\n        默认添加子域为关系域\n        :param network_type:\n        :param httphost: http的域\n        :param credential_key:\n        :param credential_id:\n        :param port:\n        :param domaintype: 域类型 child or parallel\n        :param host: 域名或者ip\n        :return:添加成功的关系域uuid\n        \"\"\"\n        if network_type == \"direct\" or domaintype == \"child\":\n            if host == \"child.eisoo.com\":\n                CommonDocDomain.del_invalid_credential(host=\"10.2.176.208\", domain_type=domaintype)\n                if credential_id is None and credential_key is None:\n                    credential_id, credential_key = CommonAuthCredentialMgnt().get_credential(host=\"10.2.176.208\",\n                                                                                              credential_type=domaintype)\n            elif host == \"parallel.eisoo.com\":\n                CommonDocDomain.del_invalid_credential(host=\"10.2.180.162\", domain_type=domaintype)\n                if credential_id is None and credential_key is None:\n                    credential_id, credential_key = CommonAuthCredentialMgnt().get_credential(host=\"10.2.180.162\",\n                                                                                              credential_type=domaintype)\n            elif credential_id is None and credential_key is None:\n                CommonDocDomain.del_invalid_credential(host=host, domain_type=domaintype)\n                credential_id, credential_key = CommonAuthCredentialMgnt().get_credential(host=host,\n                                                                                          credential_type=domaintype)\n        elif network_type == \"indirect\" and domaintype == \"parallel\":\n            if credential_id is None and credential_key is None:\n                credential_id = \"credential_id\"\n                credential_key = \"credential_id\"\n    \n        if httphost == \"10.2.176.245\":\n            header = {\"Content-Type\": \"application/json\"}\n        else:\n            token = get_token(host=httphost)\n            header = {\"Content-Type\": \"application/json\", \"Authorization\": \"Bearer \" + token}\n        client = Http_client(tagname=\"HTTPGWP\")\n        client.post(url=\"https://\" + httphost + \":443/api/document-domain-management/v1/domain/\",\n                    header=header,\n                    jsondata={\"host\": host, \"port\": port, \"type\": domaintype, \"credential_id\": credential_id,\n                              \"credential_key\": credential_key,\n                              \"network_type\": network_type})\n        # print(httphost, host, domaintype)\n        print(client.jsonResponse)\n        try:\n>           assert client.status_code == 201\nE           AssertionError\n\nHttp\\DocDomainMgnt\\CommonDocDomain.py:175: AssertionError"}, "description": "\n        父域添加多个平级域\n        :return: None\n        ", "steps": [{"name": "递归清除所有的关系域", "status": "passed", "steps": [{"name": "查询关系域列表", "status": "passed", "parameters": [{"name": "host", "value": "'10.2.176.208'"}, {"name": "keyword", "value": "''"}, {"name": "offset", "value": "0"}, {"name": "limit", "value": "1000"}], "start": 1596614024162, "stop": 1596614024247}], "parameters": [{"name": "host", "value": "'10.2.176.208'"}], "start": 1596614024161, "stop": 1596614024247}, {"name": "递归清除所有的关系域", "status": "passed", "steps": [{"name": "查询关系域列表", "status": "passed", "parameters": [{"name": "host", "value": "'10.2.180.162'"}, {"name": "keyword", "value": "''"}, {"name": "offset", "value": "0"}, {"name": "limit", "value": "1000"}], "start": 1596614024247, "stop": 1596614024325}], "parameters": [{"name": "host", "value": "'10.2.180.162'"}], "start": 1596614024247, "stop": 1596614024325}, {"name": "递归清除所有的关系域", "status": "passed", "steps": [{"name": "查询关系域列表", "status": "passed", "parameters": [{"name": "host", "value": "'10.2.176.176'"}, {"name": "keyword", "value": "''"}, {"name": "offset", "value": "0"}, {"name": "limit", "value": "1000"}], "start": 1596614024325, "stop": 1596614024421}], "parameters": [{"name": "host", "value": "'10.2.176.176'"}], "start": 1596614024325, "stop": 1596614024421}, {"name": "递归清除所有的关系域", "status": "passed", "steps": [{"name": "查询关系域列表", "status": "passed", "parameters": [{"name": "host", "value": "'10.2.176.245'"}, {"name": "keyword", "value": "''"}, {"name": "offset", "value": "0"}, {"name": "limit", "value": "1000"}], "start": 1596614024421, "stop": 1596614024750}], "parameters": [{"name": "host", "value": "'10.2.176.245'"}], "start": 1596614024421, "stop": 1596614024750}, {"name": "添加关系域", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"C:\\Users\\gu.wenpeng\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\allure_commons\\_allure.py\", line 157, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\gu.wenpeng\\PycharmProjects\\sharewebconsole_apitest\\Case\\AS\\Http\\DocDomainMgnt\\CommonDocDomain.py\", line 181, in addRelationDomain\n    raise e\n  File \"C:\\Users\\gu.wenpeng\\PycharmProjects\\sharewebconsole_apitest\\Case\\AS\\Http\\DocDomainMgnt\\CommonDocDomain.py\", line 175, in addRelationDomain\n    assert client.status_code == 201\n"}, "parameters": [{"name": "host", "value": "'10.2.176.208'"}, {"name": "port", "value": "'child'"}, {"name": "domaintype", "value": "'child'"}, {"name": "credential_id", "value": "None"}, {"name": "credential_key", "value": "'10.2.176.245'"}, {"name": "httphost", "value": "'direct'"}], "start": 1596614024750, "stop": 1596614028399}], "attachments": [{"name": "stdout", "source": "440395a3-4e28-462e-9e4b-0ce793c6c8f5-attachment.txt", "type": "text/plain"}], "start": 1596614024161, "stop": 1596614028400, "uuid": "7dcfd144-8219-45a6-ace9-a277d026c5a8", "historyId": "5d069f5c1330c67115c7b826e7fdcb50", "testCaseId": "0ccdf498bbec0a0e740bcbf97142a76e", "fullName": "Case.AS.Http.DocDomainMgnt.test_AddDocDomain.Test_PostMgntV1Domain#test_PostDocDomainParentAddTwoParallel", "labels": [{"name": "feature", "value": "添加文档域"}, {"name": "tag", "value": "ASP_317"}, {"name": "tag", "value": "high"}, {"name": "parentSuite", "value": "Case.AS.Http.DocDomainMgnt"}, {"name": "suite", "value": "test_AddDocDomain"}, {"name": "subSuite", "value": "Test_PostMgntV1Domain"}, {"name": "host", "value": "citix-1-028"}, {"name": "thread", "value": "38760-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Case.AS.Http.DocDomainMgnt.test_AddDocDomain"}]}